<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hyve - Workspaces for AI Agents</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/eladkishon/hyve/main/assets/logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
      overflow-y: auto;
      font-family: 'Space Grotesk', sans-serif;
      background: #000;
      color: #fff;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Grid background */
    .grid-bg {
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(220, 38, 38, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(220, 38, 38, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      position: relative;
      z-index: 10;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo { width: 36px; height: 36px; }

    .logo-text {
      font-size: 1.3rem;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .nav {
      display: flex;
      gap: 10px;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 600;
      text-decoration: none;
      font-size: 0.8rem;
      transition: all 0.2s;
      font-family: 'Space Grotesk', sans-serif;
      border: none;
      cursor: pointer;
    }

    .btn-ghost {
      background: rgba(255,255,255,0.05);
      color: #888;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .btn-ghost:hover { color: #fff; border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); }
    .btn-red { background: #dc2626; color: #fff; }
    .btn-red:hover { background: #ef4444; }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 60px 20px 40px;
      position: relative;
      z-index: 10;
    }

    .hero-logo {
      width: 100px;
      height: 100px;
      margin-bottom: 24px;
      filter: drop-shadow(0 0 30px rgba(220, 38, 38, 0.4));
    }

    .hero-title {
      font-size: clamp(2.5rem, 7vw, 4.5rem);
      font-weight: 700;
      line-height: 1.1;
      margin-bottom: 20px;
      letter-spacing: -2px;
    }

    .hero-title span { color: #dc2626; }

    .hero-desc {
      font-size: clamp(1rem, 2vw, 1.2rem);
      color: #666;
      max-width: 550px;
      margin: 0 auto 32px;
      line-height: 1.6;
    }

    .cta-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .install-cmd {
      background: rgba(220, 38, 38, 0.15);
      border: 1px solid rgba(220, 38, 38, 0.4);
      padding: 14px 28px;
      border-radius: 10px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .install-cmd:hover {
      background: rgba(220, 38, 38, 0.25);
      border-color: #dc2626;
    }

    .install-cmd .copy-icon {
      opacity: 0.5;
      transition: opacity 0.2s;
    }

    .install-cmd:hover .copy-icon { opacity: 1; }

    .docs-link {
      color: #666;
      font-size: 0.85rem;
      text-decoration: none;
      transition: color 0.2s;
    }

    .docs-link:hover { color: #dc2626; }

    /* Diagram Section */
    .diagram-section {
      flex: 1;
      position: relative;
      min-height: 500px;
      z-index: 5;
    }

    canvas {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    /* Activity feed */
    .activity-feed {
      position: fixed;
      top: 100px;
      right: 30px;
      z-index: 20;
      width: 260px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      pointer-events: none;
    }

    .activity-item {
      background: rgba(0,0,0,0.9);
      border: 1px solid #222;
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 0.7rem;
      font-family: 'JetBrains Mono', monospace;
      display: flex;
      align-items: center;
      gap: 8px;
      opacity: 0;
      transform: translateX(20px);
      transition: all 0.3s ease-out;
    }

    .activity-item.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .activity-item.fade-out {
      opacity: 0;
      transform: translateX(-20px);
    }

    .activity-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .activity-text {
      color: #888;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .activity-text .file { color: #22c55e; }
    .activity-text .cmd { color: #f59e0b; }

    /* Stats */
    .stats {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 20;
      display: flex;
      gap: 24px;
    }

    .stat {
      text-align: right;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
    }

    .stat-label {
      font-size: 0.65rem;
      color: #555;
      text-transform: uppercase;
    }

    .stat-value.red { color: #dc2626; }
    .stat-value.green { color: #22c55e; }
    .stat-value.blue { color: #0ea5e9; }

    /* Legend */
    .legend {
      position: fixed;
      bottom: 30px;
      left: 30px;
      z-index: 20;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.7rem;
      color: #555;
    }

    .legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .legend-dot.main { background: #dc2626; }
    .legend-dot.claude { background: #dc2626; box-shadow: 0 0 8px #dc2626; }
    .legend-dot.cursor { background: #0ea5e9; box-shadow: 0 0 8px #0ea5e9; }
    .legend-dot.aider { background: #8b5cf6; box-shadow: 0 0 8px #8b5cf6; }
    .legend-dot.db { background: #22c55e; box-shadow: 0 0 8px #22c55e; }

    @media (max-width: 900px) {
      .activity-feed, .stats, .legend { display: none; }
      .header { padding: 15px 20px; }
      .hero { padding: 40px 20px 30px; }
      .hero-logo { width: 70px; height: 70px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="grid-bg"></div>

    <header class="header">
      <div class="logo-section">
        <img src="https://raw.githubusercontent.com/eladkishon/hyve/main/assets/logo.png" alt="Hyve" class="logo">
        <span class="logo-text">Hyve</span>
      </div>
      <nav class="nav">
        <a href="docs.html" class="btn btn-ghost">Docs</a>
        <a href="https://github.com/eladkishon" class="btn btn-ghost">@eladkishon</a>
        <a href="https://github.com/eladkishon/hyve" class="btn btn-ghost">Star</a>
        <a href="https://github.com/eladkishon/hyve" class="btn btn-red">GitHub</a>
      </nav>
    </header>

    <section class="hero">
      <img src="https://raw.githubusercontent.com/eladkishon/hyve/main/assets/logo.png" alt="Hyve" class="hero-logo">
      <h1 class="hero-title">Workspaces for<br><span>AI Agents</span></h1>
      <p class="hero-desc">Run multiple AI agents in parallel. Each gets isolated git branches, databases, and ports. Zero conflicts.</p>
      <div class="cta-section">
        <div class="install-cmd" onclick="copyInstall()">
          <span>npm install -g hyve-cli</span>
          <span class="copy-icon">ðŸ“‹</span>
        </div>
        <a href="docs.html" class="docs-link">Read the docs â†’</a>
      </div>
    </section>

    <section class="diagram-section">
      <canvas id="canvas"></canvas>
    </section>
  </div>

  <div class="activity-feed" id="activity-feed"></div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot main"></div> Main Branch</div>
    <div class="legend-item"><div class="legend-dot claude"></div> Claude Agent</div>
    <div class="legend-item"><div class="legend-dot cursor"></div> Cursor Agent</div>
    <div class="legend-item"><div class="legend-dot aider"></div> Aider Agent</div>
    <div class="legend-item"><div class="legend-dot db"></div> Database</div>
  </div>

  <div class="stats">
    <div class="stat">
      <div class="stat-value red" id="workspaces-count">3</div>
      <div class="stat-label">Workspaces</div>
    </div>
    <div class="stat">
      <div class="stat-value green" id="commits-count">0</div>
      <div class="stat-label">Commits</div>
    </div>
    <div class="stat">
      <div class="stat-value blue" id="files-count">0</div>
      <div class="stat-label">Files</div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const section = document.querySelector('.diagram-section');

    let width, height;
    let time = 0;
    let commits = 0;
    let filesChanged = 0;

    const COLORS = {
      main: '#dc2626',
      claude: '#dc2626',
      cursor: '#0ea5e9',
      aider: '#8b5cf6',
      db: '#22c55e',
    };

    const nodes = [];
    const particles = [];
    const connections = [];

    class Node {
      constructor(type, label, x, y, color) {
        this.type = type;
        this.label = label;
        this.x = x;
        this.y = y;
        this.color = color;
        this.radius = type === 'main' ? 14 : type === 'workspace' ? 45 : 22;
        this.pulse = 0;
        this.activity = 0;
      }

      update() {
        this.pulse = (Math.sin(time * 0.04 + this.x * 0.01) + 1) * 0.5;
        this.activity *= 0.97;
      }

      draw() {
        ctx.save();

        // Glow
        const glowRadius = this.radius + 25 + this.pulse * 15 + this.activity * 40;
        const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, glowRadius);
        gradient.addColorStop(0, this.color + '35');
        gradient.addColorStop(1, 'transparent');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(this.x, this.y, glowRadius, 0, Math.PI * 2);
        ctx.fill();

        if (this.type === 'workspace') {
          const boxW = this.radius * 2.2;
          const boxH = this.radius * 1.6;

          // Box
          ctx.fillStyle = '#0a0a0a';
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 2;
          roundRect(ctx, this.x - boxW, this.y - boxH / 2, boxW * 2, boxH, 10);
          ctx.fill();
          ctx.stroke();

          // Header bar
          ctx.fillStyle = '#111';
          roundRect(ctx, this.x - boxW + 2, this.y - boxH / 2 + 2, boxW * 2 - 4, 22, [8, 8, 0, 0]);
          ctx.fill();

          // Label
          ctx.fillStyle = '#fff';
          ctx.font = '600 12px Space Grotesk';
          ctx.textAlign = 'center';
          ctx.fillText(this.label, this.x, this.y - boxH / 2 + 16);

          // Activity dot
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x + boxW - 14, this.y - boxH / 2 + 12, 5, 0, Math.PI * 2);
          ctx.fill();

          // Port info
          ctx.fillStyle = '#666';
          ctx.font = '500 10px JetBrains Mono';
          const idx = nodes.indexOf(this);
          ctx.fillText(`server :${4000 + idx * 1000}`, this.x, this.y + 6);
          ctx.fillText(`db :${5500 + idx}`, this.x, this.y + 22);

        } else if (this.type === 'main') {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fill();

          ctx.fillStyle = '#fff';
          ctx.font = '700 11px Space Grotesk';
          ctx.textAlign = 'center';
          ctx.fillText('main', this.x, this.y + 32);
        } else {
          ctx.fillStyle = '#0a0a0a';
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fill();
          ctx.stroke();

          ctx.fillStyle = this.color;
          ctx.font = '500 9px JetBrains Mono';
          ctx.textAlign = 'center';
          ctx.fillText(this.label, this.x, this.y + 4);
        }

        ctx.restore();
      }

      trigger() { this.activity = 1; }
    }

    class Particle {
      constructor(from, to, color) {
        this.from = from;
        this.to = to;
        this.color = color;
        this.progress = 0;
        this.speed = 0.012 + Math.random() * 0.015;
        this.size = 4 + Math.random() * 2;
      }

      update() {
        this.progress += this.speed;
        if (this.progress >= 1) {
          this.to.trigger();
          return true;
        }
        return false;
      }

      draw() {
        const x = this.from.x + (this.to.x - this.from.x) * this.progress;
        const y = this.from.y + (this.to.y - this.from.y) * this.progress;

        ctx.save();
        const gradient = ctx.createRadialGradient(x, y, 0, x, y, 25);
        gradient.addColorStop(0, this.color + 'bb');
        gradient.addColorStop(1, 'transparent');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(x, y, 25, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(x, y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }
    }

    class Connection {
      constructor(from, to, color) {
        this.from = from;
        this.to = to;
        this.color = color;
      }

      draw() {
        ctx.save();
        ctx.strokeStyle = this.color + '25';
        ctx.lineWidth = 2;
        ctx.setLineDash([6, 6]);
        ctx.beginPath();
        ctx.moveTo(this.from.x, this.from.y);
        const midX = (this.from.x + this.to.x) / 2;
        const midY = (this.from.y + this.to.y) / 2 - 40;
        ctx.quadraticCurveTo(midX, midY, this.to.x, this.to.y);
        ctx.stroke();
        ctx.restore();
      }
    }

    function roundRect(ctx, x, y, w, h, r) {
      if (typeof r === 'number') r = [r, r, r, r];
      ctx.beginPath();
      ctx.moveTo(x + r[0], y);
      ctx.lineTo(x + w - r[1], y);
      ctx.quadraticCurveTo(x + w, y, x + w, y + r[1]);
      ctx.lineTo(x + w, y + h - r[2]);
      ctx.quadraticCurveTo(x + w, y + h, x + w - r[2], y + h);
      ctx.lineTo(x + r[3], y + h);
      ctx.quadraticCurveTo(x, y + h, x, y + h - r[3]);
      ctx.lineTo(x, y + r[0]);
      ctx.quadraticCurveTo(x, y, x + r[0], y);
      ctx.closePath();
    }

    function resize() {
      const rect = section.getBoundingClientRect();
      width = canvas.width = rect.width;
      height = canvas.height = rect.height;
      initNodes();
    }

    function initNodes() {
      nodes.length = 0;
      connections.length = 0;

      const centerX = width / 2;
      const mainY = height - 80;

      // Main node
      const mainNode = new Node('main', 'main', centerX, mainY, COLORS.main);
      nodes.push(mainNode);

      // Workspaces
      const workspaces = [
        { label: 'auth-feature', color: COLORS.claude },
        { label: 'billing-api', color: COLORS.cursor },
        { label: 'ui-refactor', color: COLORS.aider }
      ];

      const spacing = Math.min(280, (width - 100) / 3);
      workspaces.forEach((ws, i) => {
        const x = centerX + (i - 1) * spacing;
        const y = height / 2 - 20;
        const wsNode = new Node('workspace', ws.label, x, y, ws.color);
        nodes.push(wsNode);
        connections.push(new Connection(mainNode, wsNode, ws.color));

        // DB node
        const dbNode = new Node('service', 'postgres', x + 70, y + 55, COLORS.db);
        nodes.push(dbNode);
        connections.push(new Connection(wsNode, dbNode, COLORS.db));
      });
    }

    function drawMainBranch() {
      const mainNode = nodes[0];
      if (!mainNode) return;

      ctx.save();
      const gradient = ctx.createLinearGradient(0, mainNode.y, width, mainNode.y);
      gradient.addColorStop(0, 'transparent');
      gradient.addColorStop(0.2, COLORS.main + '50');
      gradient.addColorStop(0.5, COLORS.main);
      gradient.addColorStop(0.8, COLORS.main + '50');
      gradient.addColorStop(1, 'transparent');

      ctx.strokeStyle = gradient;
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(0, mainNode.y);
      ctx.lineTo(width, mainNode.y);
      ctx.stroke();
      ctx.restore();
    }

    function animate() {
      time++;
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, width, height);

      drawMainBranch();
      connections.forEach(c => c.draw());
      nodes.forEach(n => { n.update(); n.draw(); });

      for (let i = particles.length - 1; i >= 0; i--) {
        if (particles[i].update()) {
          particles.splice(i, 1);
        } else {
          particles[i].draw();
        }
      }

      requestAnimationFrame(animate);
    }

    // Activity feed
    const activities = [
      { text: 'Created <span class="file">auth.controller.ts</span>', color: COLORS.claude },
      { text: 'Running <span class="cmd">pnpm test</span>', color: COLORS.cursor },
      { text: 'Refactored <span class="file">Dashboard.tsx</span>', color: COLORS.aider },
      { text: 'Added JWT middleware', color: COLORS.claude },
      { text: 'Created <span class="file">billing.service.ts</span>', color: COLORS.cursor },
      { text: 'Running <span class="cmd">migrations</span>', color: COLORS.aider },
      { text: 'Updated <span class="file">routes.ts</span>', color: COLORS.claude },
      { text: 'Added invoices table', color: COLORS.cursor },
      { text: 'Created <span class="file">ThemeProvider.tsx</span>', color: COLORS.aider },
    ];

    let activityIdx = 0;
    const feedEl = document.getElementById('activity-feed');

    function addActivity() {
      const activity = activities[activityIdx % activities.length];
      activityIdx++;

      const item = document.createElement('div');
      item.className = 'activity-item';
      item.innerHTML = `
        <div class="activity-dot" style="background: ${activity.color}; box-shadow: 0 0 8px ${activity.color}"></div>
        <div class="activity-text">${activity.text}</div>
      `;
      feedEl.insertBefore(item, feedEl.firstChild);
      setTimeout(() => item.classList.add('visible'), 10);

      const items = feedEl.querySelectorAll('.activity-item');
      if (items.length > 5) {
        const old = items[items.length - 1];
        old.classList.add('fade-out');
        setTimeout(() => old.remove(), 300);
      }

      filesChanged++;
      if (Math.random() > 0.5) commits++;
      document.getElementById('files-count').textContent = filesChanged;
      document.getElementById('commits-count').textContent = commits;

      // Particle
      const wsNodes = nodes.filter(n => n.type === 'workspace');
      const wsNode = wsNodes[Math.floor(Math.random() * wsNodes.length)];
      if (wsNode && nodes[0]) {
        particles.push(new Particle(nodes[0], wsNode, wsNode.color));
      }
    }

    function copyInstall() {
      navigator.clipboard.writeText('npm install -g hyve-cli');
      const cmd = document.querySelector('.install-cmd span:first-child');
      const orig = cmd.textContent;
      cmd.textContent = 'Copied!';
      setTimeout(() => cmd.textContent = orig, 1500);
    }

    // Init
    window.addEventListener('resize', resize);
    resize();
    animate();
    setInterval(addActivity, 2000);
    setTimeout(addActivity, 500);
  </script>
</body>
</html>
