<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hyve - Workspaces for AI Agents</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/eladkishon/hyve/main/assets/logo.png">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background: #000;
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .page {
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px;
      position: relative;
      overflow: hidden;
    }

    /* Animated grid background */
    .grid-bg {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(220, 38, 38, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(220, 38, 38, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      mask-image: radial-gradient(ellipse at center, black 20%, transparent 70%);
    }

    /* Glowing orb */
    .glow {
      position: absolute;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(220, 38, 38, 0.15) 0%, transparent 60%);
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .content {
      position: relative;
      z-index: 1;
      text-align: center;
      max-width: 640px;
    }

    .logo {
      width: 200px;
      margin-bottom: 24px;
    }

    .tagline {
      font-size: clamp(1.8rem, 5vw, 2.8rem);
      font-weight: 700;
      line-height: 1.1;
      margin-bottom: 16px;
      letter-spacing: -0.03em;
    }

    .tagline span {
      color: #dc2626;
    }

    .desc {
      color: #666;
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .demo {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
      width: 100%;
      max-width: 700px;
    }

    .terminal {
      background: #111;
      border: 1px solid #333;
      border-radius: 10px;
      flex: 1.2;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      text-align: left;
      overflow: hidden;
    }

    .terminal-header {
      background: #1a1a1a;
      padding: 8px 12px;
      display: flex;
      gap: 6px;
      border-bottom: 1px solid #333;
    }

    .terminal-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .terminal-dot.red { background: #dc2626; }
    .terminal-dot.yellow { background: #ca8a04; }
    .terminal-dot.green { background: #16a34a; }

    .terminal-body {
      padding: 12px;
      height: 140px;
      overflow-y: auto;
    }

    .terminal-line {
      margin-bottom: 4px;
      white-space: pre-wrap;
      word-break: break-all;
      color: #999;
    }

    .terminal-line.dim { color: #666; }
    .terminal-line.success { color: #22c55e; }
    .terminal-line.info { color: #888; }

    .terminal-input-line {
      display: flex;
      align-items: center;
    }

    .terminal-prompt {
      color: #dc2626;
      margin-right: 8px;
    }

    .terminal-input {
      flex: 1;
      background: transparent;
      border: none;
      color: #fff;
      font-family: inherit;
      font-size: inherit;
      outline: none;
      caret-color: #dc2626;
    }

    .autocomplete {
      color: #333;
      pointer-events: none;
    }

    .workspace-panel {
      background: #111;
      border: 1px solid #333;
      border-radius: 10px;
      flex: 0.8;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      text-align: left;
      overflow: hidden;
    }

    .workspace-panel-header {
      background: #1a1a1a;
      padding: 8px 12px;
      border-bottom: 1px solid #333;
      color: #888;
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .workspace-panel-body {
      padding: 10px 12px;
      height: 140px;
      overflow-y: auto;
    }

    .ws-item {
      margin-bottom: 10px;
    }

    .ws-item:last-child {
      margin-bottom: 0;
    }

    .ws-name {
      color: #dc2626;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .ws-service {
      color: #777;
      margin-left: 8px;
      display: flex;
      justify-content: space-between;
    }

    .ws-service .port {
      color: #22c55e;
    }

    .ws-empty {
      color: #555;
      font-style: italic;
    }

    .autocomplete-hint {
      position: absolute;
      color: #444;
      pointer-events: none;
      white-space: nowrap;
    }

    .terminal-input-wrapper {
      position: relative;
      flex: 1;
    }

    .cta {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border-radius: 10px;
      font-weight: 600;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s;
      font-family: 'Space Grotesk', sans-serif;
    }

    .btn-red {
      background: #dc2626;
      color: #fff;
    }

    .btn-red:hover {
      background: #ef4444;
      transform: translateY(-3px);
      box-shadow: 0 20px 40px rgba(220, 38, 38, 0.3);
    }

    .btn-ghost {
      background: transparent;
      color: #666;
      border: 1px solid #222;
    }

    .btn-ghost:hover {
      color: #fff;
      border-color: #444;
    }

    .btn-star:hover {
      color: #fbbf24;
      border-color: #fbbf24;
    }

    .pills {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 24px;
    }

    .pill {
      padding: 6px 12px;
      background: #0d0d0d;
      border: 1px solid #1a1a1a;
      border-radius: 100px;
      font-size: 0.75rem;
      color: #555;
    }

    .footer {
      position: absolute;
      bottom: 16px;
      color: #333;
      font-size: 0.75rem;
    }

    .footer a {
      color: #dc2626;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="grid-bg"></div>
    <div class="glow"></div>

    <div class="content">
      <img src="https://raw.githubusercontent.com/eladkishon/hyve/main/assets/logo.png" alt="Hyve" class="logo">

      <h1 class="tagline">
        Workspaces for<br><span>AI Agents</span>
      </h1>

      <p class="desc">
        Run Claude Code, Cursor, or Aider in parallel.<br>
        Isolated branches. Isolated databases. Zero conflicts.
      </p>

      <div class="demo">
        <div class="terminal">
          <div class="terminal-header">
            <div class="terminal-dot red"></div>
            <div class="terminal-dot yellow"></div>
            <div class="terminal-dot green"></div>
          </div>
          <div class="terminal-body" id="terminal-body">
            <div class="terminal-line dim"># Type "hyve work auth" and press Enter</div>
          </div>
          <div style="padding: 0 12px 12px;">
            <div class="terminal-input-line">
              <span class="terminal-prompt">$</span>
              <div class="terminal-input-wrapper">
                <input type="text" class="terminal-input" id="terminal-input" autocomplete="off" spellcheck="false">
                <span class="autocomplete-hint" id="autocomplete-hint"></span>
              </div>
            </div>
          </div>
        </div>
        <div class="workspace-panel">
          <div class="workspace-panel-header">Workspaces</div>
          <div class="workspace-panel-body" id="workspace-panel">
            <div class="ws-empty">No workspaces yet</div>
          </div>
        </div>
      </div>

      <div class="cta">
        <a href="https://github.com/eladkishon/hyve" class="btn btn-red">View on GitHub</a>
        <a href="https://github.com/eladkishon/hyve" class="btn btn-ghost btn-star">★ Star</a>
        <a href="https://ko-fi.com/eladkishon" class="btn btn-ghost">☕ Support</a>
      </div>

      <div class="pills">
        <span class="pill">Git Worktrees</span>
        <span class="pill">Database Cloning</span>
        <span class="pill">Port Management</span>
        <span class="pill">Claude Code Ready</span>
      </div>
    </div>

    <div class="footer">
      by <a href="https://github.com/eladkishon">@eladkishon</a>
    </div>
  </div>

  <script>
    const workspaces = {};
    let wsIndex = 0;
    const basePorts = { server: 4000, webapp: 4001, db: 5500 };
    const history = [];
    let historyIndex = -1;

    const commands = [
      'hyve create auth server webapp',
      'hyve create billing server webapp',
      'hyve work auth server webapp',
      'hyve run auth',
      'hyve status',
      'hyve list',
      'hyve cleanup auth',
      'hyve db auth',
      'hyve halt auth'
    ];

    const input = document.getElementById('terminal-input');
    const body = document.getElementById('terminal-body');
    const panel = document.getElementById('workspace-panel');
    const hint = document.getElementById('autocomplete-hint');

    const subcommands = ['create', 'work', 'run', 'start', 'status', 'list', 'cleanup', 'halt', 'db'];

    function getAutocomplete(val) {
      if (!val) return 'hyve work auth server webapp';

      const parts = val.split(' ').filter(p => p);

      // Autocomplete "hyve"
      if (parts.length === 1 && 'hyve'.startsWith(parts[0]) && parts[0] !== 'hyve') {
        return 'hyve'.slice(parts[0].length);
      }

      // After "hyve", suggest subcommands
      if (parts.length === 1 && parts[0] === 'hyve') {
        return ' work';
      }

      // Autocomplete subcommand
      if (parts.length === 2 && parts[0] === 'hyve') {
        const sub = subcommands.find(s => s.startsWith(parts[1]) && s !== parts[1]);
        if (sub) return sub.slice(parts[1].length);

        // After complete subcommand, suggest args
        if (parts[1] === 'create' || parts[1] === 'work') return ' auth server webapp';
        if (parts[1] === 'run' || parts[1] === 'start' || parts[1] === 'cleanup' || parts[1] === 'halt' || parts[1] === 'db') {
          const names = Object.keys(workspaces);
          return names.length > 0 ? ' ' + names[0] : ' auth';
        }
      }

      // "hyve create <name>" - suggest repos
      if (parts.length === 3 && parts[0] === 'hyve' && parts[1] === 'create') {
        return ' server webapp';
      }

      // Find matching full command
      const match = commands.find(c => c.startsWith(val) && c !== val);
      if (match) return match.slice(val.length);

      return '';
    }

    function updateHint() {
      const val = input.value;
      const completion = getAutocomplete(val);
      hint.textContent = val + completion;
    }

    function addLine(text, cls = '') {
      const line = document.createElement('div');
      line.className = 'terminal-line ' + cls;
      line.textContent = text;
      body.appendChild(line);
      body.scrollTop = body.scrollHeight;
    }

    function updatePanel() {
      const names = Object.keys(workspaces);
      if (names.length === 0) {
        panel.innerHTML = '<div class="ws-empty">No workspaces yet</div>';
        return;
      }
      panel.innerHTML = names.map(name => {
        const ws = workspaces[name];
        const services = ws.repos.map(r =>
          `<div class="ws-service">${r} <span class="port">:${ws.ports[r]}</span></div>`
        ).join('');
        return `<div class="ws-item"><div class="ws-name">${name}/</div>${services}<div class="ws-service">postgres <span class="port">:${ws.dbPort}</span></div></div>`;
      }).join('');
    }

    function createWorkspace(name, repos) {
      if (workspaces[name]) {
        addLine(`Workspace '${name}' already exists`, 'info');
        return false;
      }
      const offset = wsIndex * 1000;
      const ports = {};
      repos.forEach((r, i) => ports[r] = basePorts.server + offset + i);
      workspaces[name] = { repos, ports, dbPort: basePorts.db + wsIndex, running: false };
      wsIndex++;
      addLine(`✓ Created workspace '${name}'`, 'success');
      addLine(`  Branch: feature/${name}`, 'info');
      addLine(`  Database: postgres :${workspaces[name].dbPort}`, 'info');
      updatePanel();
      return true;
    }

    function runWorkspace(name) {
      if (!workspaces[name]) {
        addLine(`Workspace '${name}' not found. Create it first.`, 'info');
        return false;
      }
      workspaces[name].running = true;
      addLine(`✓ Starting ${name}...`, 'success');
      workspaces[name].repos.forEach(r => {
        addLine(`  ${r} on :${workspaces[name].ports[r]}`, 'info');
      });
      addLine(`  postgres on :${workspaces[name].dbPort}`, 'info');
      updatePanel();
      return true;
    }

    function execute(cmd) {
      addLine('$ ' + cmd, 'dim');
      history.push(cmd);
      historyIndex = history.length;

      const parts = cmd.trim().split(/\s+/);
      if (parts[0] !== 'hyve') {
        addLine('command not found: ' + parts[0], 'info');
        return;
      }

      const action = parts[1];
      const args = parts.slice(2);

      // hyve create <name> [repos...] - default repos: server webapp
      if (action === 'create' && args.length >= 1) {
        const name = args[0];
        const repos = args.length > 1 ? args.slice(1) : ['server', 'webapp'];
        createWorkspace(name, repos);
      }
      // hyve work <name> [repos...] - create + run in one command
      else if (action === 'work' && args.length >= 1) {
        const name = args[0];
        const repos = args.length > 1 ? args.slice(1) : ['server', 'webapp'];
        if (createWorkspace(name, repos)) {
          addLine('', '');
          runWorkspace(name);
          addLine('', '');
          addLine(`Ready! Agent can now work on '${name}'`, 'success');
        }
      }
      // hyve run|start <name>
      else if ((action === 'run' || action === 'start') && args[0]) {
        runWorkspace(args[0]);
      }
      // hyve status|list
      else if (action === 'status' || action === 'list') {
        const names = Object.keys(workspaces);
        if (names.length === 0) {
          addLine('No workspaces yet', 'info');
        } else {
          addLine('WORKSPACES:', 'info');
          names.forEach(name => {
            const ws = workspaces[name];
            const status = ws.running ? '● running' : '○ stopped';
            addLine(`  ${name}/ ${status}`, ws.running ? 'success' : 'info');
            ws.repos.forEach(r => addLine(`    ${r} :${ws.ports[r]}`, 'dim'));
          });
        }
      }
      // hyve cleanup <name>
      else if (action === 'cleanup' && args[0]) {
        const name = args[0];
        if (!workspaces[name]) {
          addLine(`Workspace '${name}' not found`, 'info');
          return;
        }
        delete workspaces[name];
        addLine(`✓ Removed workspace '${name}'`, 'success');
        updatePanel();
      }
      // hyve halt|stop <name>
      else if ((action === 'halt' || action === 'stop') && args[0]) {
        const name = args[0];
        if (workspaces[name]) {
          workspaces[name].running = false;
          addLine(`✓ Stopped '${name}'`, 'success');
          updatePanel();
        } else {
          addLine(`Workspace '${name}' not found`, 'info');
        }
      }
      // hyve db <name>
      else if (action === 'db' && args[0]) {
        const name = args[0];
        if (workspaces[name]) {
          addLine(`psql -h localhost -p ${workspaces[name].dbPort} -U postgres`, 'info');
          addLine(`Connected to ${name} database`, 'success');
        } else {
          addLine(`Workspace '${name}' not found`, 'info');
        }
      }
      // hyve help or unknown
      else {
        addLine('Try: hyve work auth server webapp', 'info');
      }
    }

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && input.value.trim()) {
        execute(input.value);
        input.value = '';
        hint.textContent = '';
      }
      else if (e.key === 'Tab') {
        e.preventDefault();
        const completion = getAutocomplete(input.value);
        if (completion) {
          input.value = input.value + completion;
          updateHint();
        }
      }
      else if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (history.length > 0 && historyIndex > 0) {
          historyIndex--;
          input.value = history[historyIndex];
          updateHint();
        }
      }
      else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (historyIndex < history.length - 1) {
          historyIndex++;
          input.value = history[historyIndex];
        } else {
          historyIndex = history.length;
          input.value = '';
        }
        updateHint();
      }
    });

    input.addEventListener('input', updateHint);

    // Focus terminal on click
    document.querySelector('.terminal').addEventListener('click', () => input.focus());

    // Initial hint
    updateHint();
  </script>
</body>
</html>
